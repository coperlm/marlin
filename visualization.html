<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marlin zkSNARK å¯è§†åŒ–å±•ç¤º - çœŸå®Rustå®ç°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="rust-marlin-client.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .protocol-flow {
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            background-size: 200% 200%;
            animation: gradient 3s ease infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .typing-animation {
            overflow: hidden;
            border-right: 2px solid #3b82f6;
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #3b82f6; }
        }
        .flow-arrow {
            position: relative;
        }
        .flow-arrow::after {
            content: '';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid #3b82f6;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white py-16">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-5xl font-bold mb-4 typing-animation">Marlin zkSNARK</h1>
            <p class="text-xl opacity-90 mb-6">åŸºäº Arkworks çš„é¢„å¤„ç†é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿ</p>
            <div class="bg-green-500/20 border border-green-300 text-green-100 px-6 py-3 rounded-lg mx-auto max-w-md mb-8">
                <div class="flex items-center justify-center">
                    <i class="fas fa-microchip mr-2"></i>
                    <strong>ğŸ¦€ çœŸæ­£Ruståº•å±‚è°ƒç”¨</strong>
                </div>
                <p class="text-sm opacity-90 mt-1">ç›´æ¥æ‰§è¡Œæœ¬åœ°Rustç¨‹åºï¼ŒçœŸå®çš„zkSNARK</p>
                <p class="text-xs opacity-75 mt-1">éœ€è¦: npm start</p>
            </div>
            <div class="flex justify-center space-x-6 text-sm">
                <div class="bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm">
                    <i class="fas fa-shield-alt mr-2"></i>é›¶çŸ¥è¯†
                </div>
                <div class="bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm">
                    <i class="fas fa-tachometer-alt mr-2"></i>é«˜æ•ˆéªŒè¯
                </div>
                <div class="bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm">
                    <i class="fas fa-code mr-2"></i>Rust å®ç°
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12" x-data="marlinDemo()">
        
        <!-- Protocol Overview -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">åè®®æ¶æ„æ¦‚è§ˆ</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Universal Setup -->
                <div class="bg-white rounded-lg shadow-lg p-6 card-hover transition-all duration-300">
                    <div class="text-center mb-4">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
                            <i class="fas fa-cogs text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">é€šç”¨è®¾ç½®</h3>
                    </div>
                    <ul class="text-gray-600 space-y-2">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ç”Ÿæˆ Universal SRS</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>å¤šé¡¹å¼æ‰¿è¯ºæ–¹æ¡ˆ</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>æ”¯æŒä»»æ„ç”µè·¯</li>
                    </ul>
                </div>

                <!-- Index Generation -->
                <div class="bg-white rounded-lg shadow-lg p-6 card-hover transition-all duration-300">
                    <div class="text-center mb-4">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4">
                            <i class="fas fa-database text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">ç”µè·¯ç´¢å¼•</h3>
                    </div>
                    <ul class="text-gray-600 space-y-2">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>R1CS çŸ©é˜µç”Ÿæˆ</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ç´¢å¼•å¤šé¡¹å¼æ„é€ </li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>éªŒè¯å¯†é’¥ç”Ÿæˆ</li>
                    </ul>
                </div>

                <!-- Proof System -->
                <div class="bg-white rounded-lg shadow-lg p-6 card-hover transition-all duration-300">
                    <div class="text-center mb-4">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-cyan-100 rounded-full mb-4">
                            <i class="fas fa-certificate text-cyan-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">è¯æ˜ç³»ç»Ÿ</h3>
                    </div>
                    <ul class="text-gray-600 space-y-2">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>AHP åè®®</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Fiat-Shamir å˜æ¢</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>å¤šè½®äº¤äº’ä¼˜åŒ–</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Circuit Builder -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ç”µè·¯æ„å»ºå™¨</h2>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Circuit Designer -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-tools text-blue-600 mr-2"></i>
                            è®¾è®¡ä½ çš„ç”µè·¯
                        </h3>
                        <div class="space-y-4">
                            <!-- Circuit Type Selection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ç”µè·¯ç±»å‹</label>
                                <select x-model="selectedCircuit" @change="updateCircuitParams()" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                                    <option value="multiplication">ä¹˜æ³•ç”µè·¯ (a Ã— b = c)</option>
                                    <option value="quadratic">äºŒæ¬¡æ–¹ç¨‹ (aÂ² + bÂ² = cÂ²)</option>
                                    <option value="hash">å“ˆå¸Œé¢„æ˜ åƒ (SHA256)</option>
                                    <option value="merkle">Merkle æ ‘éªŒè¯</option>
                                    <option value="custom">è‡ªå®šä¹‰ç”µè·¯</option>
                                </select>
                            </div>

                            <!-- Dynamic Parameters -->
                            <div x-show="selectedCircuit === 'multiplication'">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ç§å¯†å€¼ A</label>
                                        <input type="number" x-model="circuitParams.a" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ç§å¯†å€¼ B</label>
                                        <input type="number" x-model="circuitParams.b" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                </div>
                                <div class="mt-2 text-sm text-gray-600">
                                    å…¬å¼€è¾“å‡º: <span class="font-mono" x-text="circuitParams.a * circuitParams.b"></span>
                                </div>
                            </div>

                            <div x-show="selectedCircuit === 'quadratic'">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">è¾¹é•¿ A</label>
                                        <input type="number" x-model="circuitParams.sideA" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">è¾¹é•¿ B</label>
                                        <input type="number" x-model="circuitParams.sideB" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                </div>
                                <div class="mt-2 text-sm text-gray-600">
                                    æ–œè¾¹é•¿: <span class="font-mono" x-text="Math.sqrt(circuitParams.sideA**2 + circuitParams.sideB**2).toFixed(2)"></span>
                                </div>
                            </div>

                            <div x-show="selectedCircuit === 'custom'">
                                <!-- Circuit Designer -->
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">ç”µè·¯åç§°</label>
                                        <input type="text" x-model="customCircuit.name" placeholder="ä¾‹å¦‚ï¼šæ•°ç‹¬éªŒè¯ç”µè·¯" 
                                               class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                    </div>
                                    
                                    <!-- Variables Section -->
                                    <div class="border rounded-lg p-4 bg-gray-50">
                                        <div class="flex justify-between items-center mb-3">
                                            <h4 class="font-semibold text-gray-800">å˜é‡å®šä¹‰</h4>
                                            <button @click="addVariable()" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
                                                <i class="fas fa-plus mr-1"></i>æ·»åŠ å˜é‡
                                            </button>
                                        </div>
                                        <div class="space-y-2 max-h-32 overflow-y-auto">
                                            <template x-for="(variable, index) in customCircuit.variables" :key="index">
                                                <div class="flex items-center space-x-2 bg-white p-2 rounded border">
                                                    <select x-model="variable.type" class="px-2 py-1 border rounded text-sm">
                                                        <option value="public">å…¬å¼€</option>
                                                        <option value="private">ç§å¯†</option>
                                                        <option value="intermediate">ä¸­é—´</option>
                                                    </select>
                                                    <input type="text" x-model="variable.name" placeholder="å˜é‡å" 
                                                           class="flex-1 px-2 py-1 border rounded text-sm">
                                                    <input type="text" x-model="variable.description" placeholder="æè¿°" 
                                                           class="flex-1 px-2 py-1 border rounded text-sm">
                                                    <button @click="removeVariable(index)" class="text-red-600 hover:text-red-800">
                                                        <i class="fas fa-trash text-xs"></i>
                                                    </button>
                                                </div>
                                            </template>
                                        </div>
                                    </div>

                                    <!-- Constraints Section -->
                                    <div class="border rounded-lg p-4 bg-gray-50">
                                        <div class="flex justify-between items-center mb-3">
                                            <h4 class="font-semibold text-gray-800">çº¦æŸæ¡ä»¶</h4>
                                            <button @click="addConstraint()" class="px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700">
                                                <i class="fas fa-plus mr-1"></i>æ·»åŠ çº¦æŸ
                                            </button>
                                        </div>
                                        <div class="space-y-2 max-h-40 overflow-y-auto">
                                            <template x-for="(constraint, index) in customCircuit.constraints" :key="index">
                                                <div class="bg-white p-3 rounded border">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <span class="text-sm font-medium text-gray-700">çº¦æŸ #<span x-text="index + 1"></span></span>
                                                        <button @click="removeConstraint(index)" class="text-red-600 hover:text-red-800">
                                                            <i class="fas fa-trash text-xs"></i>
                                                        </button>
                                                    </div>
                                                    <div class="grid grid-cols-3 gap-2 text-sm">
                                                        <div>
                                                            <label class="block text-xs text-gray-600 mb-1">å·¦æ“ä½œæ•° (A)</label>
                                                            <input type="text" x-model="constraint.left" placeholder="ä¾‹å¦‚ï¼šx1 + 2*x2" 
                                                                   class="w-full px-2 py-1 border rounded text-xs">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-600 mb-1">å³æ“ä½œæ•° (B)</label>
                                                            <input type="text" x-model="constraint.right" placeholder="ä¾‹å¦‚ï¼šx3" 
                                                                   class="w-full px-2 py-1 border rounded text-xs">
                                                        </div>
                                                        <div>
                                                            <label class="block text-xs text-gray-600 mb-1">è¾“å‡º (C)</label>
                                                            <input type="text" x-model="constraint.output" placeholder="ä¾‹å¦‚ï¼šx4" 
                                                                   class="w-full px-2 py-1 border rounded text-xs">
                                                        </div>
                                                    </div>
                                                    <div class="mt-2 text-xs text-gray-600">
                                                        çº¦æŸ: (<span x-text="constraint.left || 'A'"></span>) Ã— (<span x-text="constraint.right || 'B'"></span>) = <span x-text="constraint.output || 'C'"></span>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>

                                    <!-- Circuit Templates -->
                                    <div class="border rounded-lg p-4 bg-blue-50">
                                        <h4 class="font-semibold text-gray-800 mb-3">å¿«é€Ÿæ¨¡æ¿</h4>
                                        <div class="grid grid-cols-2 gap-2">
                                            <button @click="loadTemplate('polynomial')" class="px-3 py-2 bg-white border rounded text-sm hover:bg-blue-50">
                                                <i class="fas fa-function mr-1"></i>å¤šé¡¹å¼éªŒè¯
                                            </button>
                                            <button @click="loadTemplate('comparison')" class="px-3 py-2 bg-white border rounded text-sm hover:bg-blue-50">
                                                <i class="fas fa-balance-scale mr-1"></i>æ•°å€¼æ¯”è¾ƒ
                                            </button>
                                            <button @click="loadTemplate('range')" class="px-3 py-2 bg-white border rounded text-sm hover:bg-blue-50">
                                                <i class="fas fa-arrows-alt-h mr-1"></i>èŒƒå›´è¯æ˜
                                            </button>
                                            <button @click="loadTemplate('sudoku')" class="px-3 py-2 bg-white border rounded text-sm hover:bg-blue-50">
                                                <i class="fas fa-th mr-1"></i>æ•°ç‹¬éªŒè¯
                                            </button>
                                        </div>
                                        
                                        <!-- Error Testing Templates -->
                                        <h5 class="font-semibold text-gray-800 mt-4 mb-2 text-sm">é”™è¯¯æµ‹è¯•æ¨¡æ¿</h5>
                                        <div class="grid grid-cols-2 gap-2">
                                            <button @click="loadTemplate('error_contradiction')" class="px-3 py-2 bg-red-50 border border-red-200 rounded text-sm hover:bg-red-100 text-red-700">
                                                <i class="fas fa-exclamation-triangle mr-1"></i>çŸ›ç›¾çº¦æŸ
                                            </button>
                                            <button @click="loadTemplate('error_zero_mult')" class="px-3 py-2 bg-red-50 border border-red-200 rounded text-sm hover:bg-red-100 text-red-700">
                                                <i class="fas fa-ban mr-1"></i>é›¶ä¹˜æ³•é”™è¯¯
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Circuit Stats -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">ç”µè·¯ç»Ÿè®¡</h4>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">çº¦æŸæ•°é‡:</span>
                                        <span class="font-mono" x-text="getCircuitStats().constraints"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">å˜é‡æ•°é‡:</span>
                                        <span class="font-mono" x-text="getCircuitStats().variables"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">é¢„ä¼°è¯æ˜å¤§å°:</span>
                                        <span class="font-mono" x-text="getCircuitStats().proofSize + ' bytes'"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">éªŒè¯æ—¶é—´:</span>
                                        <span class="font-mono" x-text="getCircuitStats().verifyTime + ' ms'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Circuit Visualization -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-eye text-purple-600 mr-2"></i>
                            ç”µè·¯å¯è§†åŒ–
                        </h3>
                        
                        <!-- Circuit Diagram for Custom Circuit -->
                        <div x-show="selectedCircuit === 'custom' && customCircuit.constraints.length > 0" class="mb-4 p-4 bg-white border rounded-lg">
                            <h4 class="text-sm font-semibold text-gray-700 mb-3">ç”µè·¯å›¾</h4>
                            <div class="space-y-2">
                                <!-- Variables Display -->
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <template x-for="(variable, index) in customCircuit.variables" :key="index">
                                        <div class="px-2 py-1 rounded text-xs border"
                                             :class="variable.type === 'public' ? 'bg-green-100 border-green-300 text-green-800' : 
                                                    variable.type === 'private' ? 'bg-red-100 border-red-300 text-red-800' : 
                                                    'bg-yellow-100 border-yellow-300 text-yellow-800'">
                                            <span x-text="variable.name"></span>
                                            <span class="ml-1 opacity-75" x-text="'(' + variable.type + ')'"></span>
                                        </div>
                                    </template>
                                </div>
                                
                                <!-- Constraints Flow -->
                                <div class="space-y-1">
                                    <template x-for="(constraint, index) in customCircuit.constraints.slice(0, 5)" :key="index">
                                        <div class="flex items-center text-xs bg-gray-50 p-2 rounded">
                                            <span class="w-4 h-4 bg-blue-500 rounded-full flex-shrink-0 mr-2 flex items-center justify-center text-white text-xs" x-text="index + 1"></span>
                                            <span class="flex-1">
                                                (<span x-text="constraint.left || 'A'"></span>) Ã— (<span x-text="constraint.right || 'B'"></span>) = <span x-text="constraint.output || 'C'"></span>
                                            </span>
                                        </div>
                                    </template>
                                    <div x-show="customCircuit.constraints.length > 5" class="text-xs text-gray-500 pl-6">
                                        ... è¿˜æœ‰ <span x-text="customCircuit.constraints.length - 5"></span> ä¸ªçº¦æŸ
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-900 rounded-lg p-6 text-green-400 font-mono text-sm h-96 overflow-y-auto">
                            <div x-show="selectedCircuit === 'multiplication'">
                                <div class="text-yellow-400 mb-2">// ä¹˜æ³•ç”µè·¯ R1CS è¡¨ç¤º</div>
                                <div>witness = [1, a, b, c]</div>
                                <div>constraints:</div>
                                <div class="ml-4">
                                    <div>â€¢ a * b = c</div>
                                    <div>â€¢ è¾“å…¥éªŒè¯çº¦æŸ</div>
                                </div>
                                <div class="mt-4 text-blue-400">å½“å‰å®ä¾‹:</div>
                                <div class="ml-4">
                                    <div>a = <span x-text="circuitParams.a"></span> (ç§å¯†)</div>
                                    <div>b = <span x-text="circuitParams.b"></span> (ç§å¯†)</div>
                                    <div>c = <span x-text="circuitParams.a * circuitParams.b"></span> (å…¬å¼€)</div>
                                </div>
                                <div class="mt-4 text-cyan-400">çŸ©é˜µè¡¨ç¤º:</div>
                                <div class="ml-4 text-xs">
                                    <div>A = [[0, 1, 0, 0]]</div>
                                    <div>B = [[0, 0, 1, 0]]</div>
                                    <div>C = [[0, 0, 0, 1]]</div>
                                </div>
                            </div>

                            <div x-show="selectedCircuit === 'quadratic'">
                                <div class="text-yellow-400 mb-2">// å‹¾è‚¡å®šç†éªŒè¯ç”µè·¯</div>
                                <div>witness = [1, a, b, c, aÂ², bÂ², cÂ²]</div>
                                <div>constraints:</div>
                                <div class="ml-4">
                                    <div>â€¢ a * a = aÂ²</div>
                                    <div>â€¢ b * b = bÂ²</div>
                                    <div>â€¢ c * c = cÂ²</div>
                                    <div>â€¢ aÂ² + bÂ² = cÂ²</div>
                                </div>
                                <div class="mt-4 text-blue-400">å½“å‰å®ä¾‹:</div>
                                <div class="ml-4">
                                    <div>a = <span x-text="circuitParams.sideA"></span></div>
                                    <div>b = <span x-text="circuitParams.sideB"></span></div>
                                    <div>c = <span x-text="Math.sqrt(circuitParams.sideA**2 + circuitParams.sideB**2).toFixed(2)"></span></div>
                                </div>
                            </div>

                            <div x-show="selectedCircuit === 'hash'">
                                <div class="text-yellow-400 mb-2">// SHA256 é¢„æ˜ åƒç”µè·¯</div>
                                <div>çº¦æŸæ•°é‡: ~30,000</div>
                                <div>å˜é‡æ•°é‡: ~15,000</div>
                                <div class="mt-2">è¯æ˜çŸ¥é“ x ä½¿å¾— SHA256(x) = hash</div>
                                <div class="mt-4 text-red-400">å¤æ‚åº¦è¾ƒé«˜ï¼Œé€‚åˆå¤§è§„æ¨¡ç”µè·¯æ¼”ç¤º</div>
                            </div>

                            <div x-show="selectedCircuit === 'merkle'">
                                <div class="text-yellow-400 mb-2">// Merkle æ ‘æˆå‘˜è¯æ˜</div>
                                <div>æ ‘æ·±åº¦: 8 å±‚</div>
                                <div>çº¦æŸæ•°é‡: ~240,000</div>
                                <div>å˜é‡æ•°é‡: ~120,000</div>
                                <div class="mt-2">è¯æ˜å¶å­èŠ‚ç‚¹åœ¨ Merkle æ ‘ä¸­</div>
                            </div>

                            <div x-show="selectedCircuit === 'custom'">
                                <div class="text-yellow-400 mb-2">// è‡ªå®šä¹‰ç”µè·¯: <span x-text="customCircuit.name || 'æœªå‘½å'"></span></div>
                                <div class="mt-2 text-blue-400">å˜é‡å®šä¹‰:</div>
                                <template x-for="(variable, index) in customCircuit.variables" :key="index">
                                    <div class="ml-2 text-sm">
                                        <span :class="variable.type === 'public' ? 'text-green-400' : variable.type === 'private' ? 'text-red-400' : 'text-yellow-400'">
                                            <span x-text="variable.type"></span>
                                        </span>
                                        <span x-text="variable.name"></span>: 
                                        <span class="text-gray-400" x-text="variable.description"></span>
                                    </div>
                                </template>
                                <div class="mt-3 text-cyan-400">R1CS çº¦æŸ:</div>
                                <template x-for="(constraint, index) in customCircuit.constraints" :key="index">
                                    <div class="ml-2 text-xs">
                                        <span class="text-gray-500">[<span x-text="index + 1"></span>]</span>
                                        (<span x-text="constraint.left || 'A'"></span>) Ã— 
                                        (<span x-text="constraint.right || 'B'"></span>) = 
                                        <span x-text="constraint.output || 'C'"></span>
                                    </div>
                                </template>
                                <div class="mt-3 text-purple-400">ç”µè·¯ç»Ÿè®¡:</div>
                                <div class="ml-2 text-sm">
                                    <div>å˜é‡æ•°: <span x-text="customCircuit.variables.length"></span></div>
                                    <div>çº¦æŸæ•°: <span x-text="customCircuit.constraints.length"></span></div>
                                    <div>å…¬å¼€è¾“å…¥: <span x-text="customCircuit.variables.filter(v => v.type === 'public').length"></span></div>
                                    <div>ç§å¯†è§è¯: <span x-text="customCircuit.variables.filter(v => v.type === 'private').length"></span></div>
                                </div>
                                <div class="mt-3 text-green-400">
                                    <div x-show="customCircuit.constraints.length > 0">âœ“ ç”µè·¯å®šä¹‰å®Œæ•´</div>
                                    <div x-show="customCircuit.constraints.length === 0" class="text-red-400">âš  éœ€è¦æ·»åŠ çº¦æŸæ¡ä»¶</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Circuit Validation -->
                        <div x-show="selectedCircuit === 'custom'" class="mt-4 p-3 rounded-lg"
                             :class="customCircuit.constraints.length > 0 ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'">
                            <div class="flex items-center">
                                <i :class="customCircuit.constraints.length > 0 ? 'fas fa-check-circle text-green-600' : 'fas fa-exclamation-triangle text-yellow-600'" class="mr-2"></i>
                                <span class="text-sm font-medium"
                                      :class="customCircuit.constraints.length > 0 ? 'text-green-800' : 'text-yellow-800'">
                                    <span x-show="customCircuit.constraints.length > 0">ç”µè·¯å®šä¹‰å®Œæ•´ï¼Œå¯ä»¥è¿è¡Œæ¼”ç¤º</span>
                                    <span x-show="customCircuit.constraints.length === 0">è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªçº¦æŸæ¡ä»¶</span>
                                </span>
                            </div>
                            <div x-show="customCircuit.constraints.length > 0" class="mt-2 text-xs text-green-700">
                                å°†ç”ŸæˆåŒ…å« <span x-text="customCircuit.constraints.length"></span> ä¸ªçº¦æŸå’Œ 
                                <span x-text="customCircuit.variables.length"></span> ä¸ªå˜é‡çš„ R1CS ç³»ç»Ÿ
                            </div>
                        </div>

                        <!-- Run Circuit Button -->
                        <button @click="runCircuitDemo()" 
                                :disabled="isCircuitRunning || (selectedCircuit === 'custom' && customCircuit.constraints.length === 0)" 
                                class="w-full mt-4 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
                            <span x-show="!isCircuitRunning">ğŸš€ è¿è¡Œç”µè·¯æ¼”ç¤º</span>
                            <span x-show="isCircuitRunning" class="flex items-center justify-center">
                                <i class="fas fa-spinner fa-spin mr-2"></i>æ‰§è¡Œä¸­...
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Circuit Execution Results -->
        <section class="mb-16" x-show="circuitResults">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ç”µè·¯æ‰§è¡Œç»“æœ</h2>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="grid lg:grid-cols-3 gap-6">
                    <!-- Setup Phase -->
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-800 mb-3">
                            <i class="fas fa-cogs mr-2"></i>è®¾ç½®é˜¶æ®µ
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Universal SRS:</span>
                                <span class="text-green-600" x-text="circuitResults?.setup?.status"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>æœ€å¤§åº¦æ•°:</span>
                                <span x-text="circuitResults?.setup?.maxDegree"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>è®¾ç½®æ—¶é—´:</span>
                                <span x-text="circuitResults?.setup?.time + ' ms'"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Proving Phase -->
                    <div class="bg-green-50 rounded-lg p-4">
                        <h3 class="font-semibold text-green-800 mb-3">
                            <i class="fas fa-key mr-2"></i>è¯æ˜é˜¶æ®µ
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>è¯æ˜ç”Ÿæˆ:</span>
                                <span class="text-green-600" x-text="circuitResults?.proving?.status"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>è¯æ˜å¤§å°:</span>
                                <span x-text="circuitResults?.proving?.size + ' bytes'"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>è¯æ˜æ—¶é—´:</span>
                                <span x-text="circuitResults?.proving?.time + ' ms'"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Verification Phase -->
                    <div class="rounded-lg p-4" :class="circuitResults?.verification?.isValid !== false ? 'bg-purple-50' : 'bg-red-50'">
                        <h3 class="font-semibold mb-3" :class="circuitResults?.verification?.isValid !== false ? 'text-purple-800' : 'text-red-800'">
                            <i :class="circuitResults?.verification?.isValid !== false ? 'fas fa-check-circle' : 'fas fa-times-circle'" class="mr-2"></i>éªŒè¯é˜¶æ®µ
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>éªŒè¯ç»“æœ:</span>
                                <span :class="circuitResults?.verification?.isValid !== false ? 'text-green-600' : 'text-red-600'" 
                                      x-text="circuitResults?.verification?.status"></span>
                            </div>
                            <div x-show="circuitResults?.verification?.failureReason" class="text-red-600 text-xs mt-2 p-2 bg-red-100 rounded">
                                <strong>å¤±è´¥åŸå› :</strong> <span x-text="circuitResults?.verification?.failureReason"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>éªŒè¯æ—¶é—´:</span>
                                <span x-text="circuitResults?.verification?.time + ' ms'"></span>
                            </div>
                            <div class="flex justify-between">
                                <span>å®‰å…¨çº§åˆ«:</span>
                                <span>128-bit</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Execution Log -->
                <div class="mt-6">
                    <h3 class="font-semibold text-gray-800 mb-3">æ‰§è¡Œæ—¥å¿—</h3>
                    <div class="bg-gray-900 text-green-400 font-mono text-sm p-4 rounded-lg h-48 overflow-y-auto">
                        <template x-for="log in executionLogs" :key="log.id">
                            <div :class="getLogColor(log.type)">
                                <span class="text-gray-500" x-text="log.timestamp"></span>
                                <span x-text="log.message"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="mb-16" x-show="!demoCompleted">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">åè®®æµç¨‹æ¼”ç¤º</h2>
            
            <!-- Step Indicator -->
            <div class="flex justify-center mb-8">
                <div class="flex space-x-4">
                    <template x-for="(step, index) in steps" :key="index">
                        <div class="flex items-center">
                            <div class="flex items-center justify-center w-10 h-10 rounded-full"
                                 :class="currentStep >= index ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600'">
                                <span x-text="index + 1"></span>
                            </div>
                            <div x-show="index < steps.length - 1" class="w-16 h-0.5 bg-gray-300 mx-2"></div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Current Step Display -->
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto">
                <template x-for="(step, index) in steps" :key="index">
                    <div x-show="currentStep === index" class="text-center">
                        <div class="mb-6">
                            <div class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-4"
                                 :class="step.color">
                                <i :class="step.icon + ' text-3xl'"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-4" x-text="step.title"></h3>
                            <p class="text-gray-600 mb-6" x-text="step.description"></p>
                        </div>

                        <!-- Step Content -->
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">è¾“å…¥</h4>
                                <div class="text-sm text-gray-600" x-html="step.input"></div>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">è¾“å‡º</h4>
                                <div class="text-sm text-gray-600" x-html="step.output"></div>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="mb-6">
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="protocol-flow h-2 rounded-full transition-all duration-1000"
                                     :style="`width: ${((currentStep + 1) / steps.length) * 100}%`"></div>
                            </div>
                        </div>

                        <!-- Navigation -->
                        <div class="flex justify-between">
                            <button @click="previousStep()" 
                                    :disabled="currentStep === 0"
                                    class="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg disabled:opacity-50">
                                ä¸Šä¸€æ­¥
                            </button>
                            <button @click="nextStep()" 
                                    :disabled="currentStep === steps.length - 1"
                                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                <span x-text="currentStep === steps.length - 1 ? 'å®Œæˆ' : 'ä¸‹ä¸€æ­¥'"></span>
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </section>

        <!-- Technical Details -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">æŠ€æœ¯ç»†èŠ‚</h2>
            <div class="grid lg:grid-cols-2 gap-8">
                
                <!-- AHP Components -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-puzzle-piece text-blue-600 mr-2"></i>
                        AHP ç»„ä»¶
                    </h3>
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-semibold text-gray-800">ç´¢å¼•å™¨ (Indexer)</h4>
                            <p class="text-gray-600 text-sm">å¤„ç† R1CS çº¦æŸç³»ç»Ÿï¼Œç”Ÿæˆç´¢å¼•å¤šé¡¹å¼</p>
                            <div class="text-xs text-gray-500 mt-1">
                                å¤šé¡¹å¼: row, col, a_val, b_val, c_val, row_col
                            </div>
                        </div>
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-semibold text-gray-800">è¯æ˜è€… (Prover)</h4>
                            <p class="text-gray-600 text-sm">æ‰§è¡Œä¸‰è½®äº¤äº’åè®®ï¼Œç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜</p>
                            <div class="text-xs text-gray-500 mt-1">
                                å¤šé¡¹å¼: w, z_a, z_b, mask_poly, t, g_1, h_1, g_2, h_2
                            </div>
                        </div>
                        <div class="border-l-4 border-cyan-500 pl-4">
                            <h4 class="font-semibold text-gray-800">éªŒè¯è€… (Verifier)</h4>
                            <p class="text-gray-600 text-sm">éªŒè¯è¯æ˜çš„æ­£ç¡®æ€§ï¼Œæ”¯æŒé«˜æ•ˆéªŒè¯</p>
                            <div class="text-xs text-gray-500 mt-1">
                                æ£€æŸ¥çº¿æ€§ç»„åˆå’Œå¤šé¡¹å¼æ‰¿è¯º
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Structures -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">
                        <i class="fas fa-cube text-purple-600 mr-2"></i>
                        æ ¸å¿ƒæ•°æ®ç»“æ„
                    </h3>
                    <div class="space-y-4">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-2">UniversalSRS</h4>
                            <p class="text-gray-600 text-sm">é€šç”¨ç»“æ„åŒ–å‚è€ƒå­—ç¬¦ä¸²ï¼Œæ”¯æŒå¤šé¡¹å¼æ‰¿è¯º</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-2">IndexVerifierKey</h4>
                            <p class="text-gray-600 text-sm">åŒ…å«ç´¢å¼•ä¿¡æ¯å’Œæ‰¿è¯ºçš„éªŒè¯å¯†é’¥</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-2">Proof</h4>
                            <p class="text-gray-600 text-sm">åŒ…å«æ‰¿è¯ºã€æ±‚å€¼å’Œè¯æ˜è€…æ¶ˆæ¯çš„å®Œæ•´è¯æ˜</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Real-time Performance Monitor -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">å®æ—¶æ€§èƒ½ç›‘æ§</h2>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Performance Metrics -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">æ€§èƒ½æŒ‡æ ‡</h3>
                        <div class="space-y-4">
                            <div class="bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-green-800 font-medium">éªŒè¯æ—¶é—´å¤æ‚åº¦</span>
                                    <span class="text-2xl font-bold text-green-600">O(log n)</span>
                                </div>
                                <div class="w-full bg-green-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" :style="`width: ${Math.min(100, Math.log2(getCircuitStats().constraints) * 10)}%`"></div>
                                </div>
                                <div class="text-sm text-green-700 mt-1">
                                    å½“å‰: ~<span x-text="getCircuitStats().verifyTime"></span> ms
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-blue-800 font-medium">è¯æ˜å¤§å°</span>
                                    <span class="text-2xl font-bold text-blue-600">O(âˆšn)</span>
                                </div>
                                <div class="w-full bg-blue-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" :style="`width: ${Math.min(100, Math.sqrt(getCircuitStats().constraints) / 10)}%`"></div>
                                </div>
                                <div class="text-sm text-blue-700 mt-1">
                                    å½“å‰: ~<span x-text="getCircuitStats().proofSize"></span> bytes
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-purple-800 font-medium">è¯æ˜ç”Ÿæˆæ—¶é—´</span>
                                    <span class="text-2xl font-bold text-purple-600">O(n)</span>
                                </div>
                                <div class="w-full bg-purple-200 rounded-full h-2">
                                    <div class="bg-purple-600 h-2 rounded-full" :style="`width: ${Math.min(100, getCircuitStats().constraints / 100)}%`"></div>
                                </div>
                                <div class="text-sm text-purple-700 mt-1">
                                    é¢„ä¼°: ~<span x-text="Math.floor(getCircuitStats().constraints / 50)"></span> ç§’
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Live Circuit Analysis -->
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">å®æ—¶ç”µè·¯åˆ†æ</h3>
                        <div class="bg-gray-900 rounded-lg p-4 text-green-400 font-mono text-sm h-64 overflow-y-auto">
                            <div class="text-yellow-400 mb-2">// å®æ—¶ç”µè·¯åˆ†ææŠ¥å‘Š</div>
                            <div>ç”µè·¯ç±»å‹: <span x-text="selectedCircuit"></span></div>
                            <div>çº¦æŸæ•°é‡: <span x-text="getCircuitStats().constraints"></span></div>
                            <div>å˜é‡æ•°é‡: <span x-text="getCircuitStats().variables"></span></div>
                            <div class="mt-2 text-cyan-400">æ€§èƒ½åˆ†æ:</div>
                            <div class="ml-2">
                                <div>â€¢ Setup é˜¶æ®µ: ~<span x-text="Math.floor(getCircuitStats().constraints / 10)"></span> ms</div>
                                <div>â€¢ Index é˜¶æ®µ: ~<span x-text="Math.floor(getCircuitStats().constraints / 5)"></span> ms</div>
                                <div>â€¢ Prove é˜¶æ®µ: ~<span x-text="Math.floor(getCircuitStats().constraints / 2)"></span> ms</div>
                                <div>â€¢ Verify é˜¶æ®µ: ~<span x-text="getCircuitStats().verifyTime"></span> ms</div>
                            </div>
                            <div class="mt-2 text-blue-400">èµ„æºéœ€æ±‚:</div>
                            <div class="ml-2">
                                <div>â€¢ å†…å­˜: ~<span x-text="Math.floor((getCircuitStats().constraints + getCircuitStats().variables) / 1000)"></span> MB</div>
                                <div>â€¢ å­˜å‚¨: ~<span x-text="getCircuitStats().proofSize"></span> bytes</div>
                                <div>â€¢ CPU: å•æ ¸å¿ƒ</div>
                            </div>
                            <template x-if="circuitResults">
                                <div class="mt-2 text-green-400">
                                    <div>âœ“ æœ€è¿‘æ‰§è¡ŒæˆåŠŸ</div>
                                    <div>éªŒè¯ç»“æœ: é€šè¿‡</div>
                                    <div>å®‰å…¨çº§åˆ«: 128-bit</div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>

                <!-- Interactive Performance Chart -->
                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">æ€§èƒ½å¯¹æ¯”å›¾è¡¨</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <div class="text-3xl font-bold text-blue-600 mb-2">
                                <span x-text="Math.floor(getCircuitStats().constraints / 1000)"></span>K
                            </div>
                            <div class="text-gray-600">çº¦æŸè§„æ¨¡</div>
                            <div class="mt-2 text-xs text-gray-500">
                                å¤æ‚åº¦: <span x-text="getCircuitStats().constraints < 1000 ? 'ç®€å•' : getCircuitStats().constraints < 10000 ? 'ä¸­ç­‰' : 'å¤æ‚'"></span>
                            </div>
                        </div>
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <div class="text-3xl font-bold text-green-600 mb-2">
                                <span x-text="getCircuitStats().verifyTime"></span>ms
                            </div>
                            <div class="text-gray-600">éªŒè¯æ—¶é—´</div>
                            <div class="mt-2 text-xs text-gray-500">
                                æ•ˆç‡: <span x-text="getCircuitStats().verifyTime < 50 ? 'ä¼˜ç§€' : getCircuitStats().verifyTime < 200 ? 'è‰¯å¥½' : 'ä¸€èˆ¬'"></span>
                            </div>
                        </div>
                        <div class="text-center p-4 bg-gray-50 rounded-lg">
                            <div class="text-3xl font-bold text-purple-600 mb-2">
                                <span x-text="Math.floor(getCircuitStats().proofSize / 1024)"></span>KB
                            </div>
                            <div class="text-gray-600">è¯æ˜å¤§å°</div>
                            <div class="mt-2 text-xs text-gray-500">
                                ç´§å‡‘æ€§: <span x-text="getCircuitStats().proofSize < 2048 ? 'ä¼˜ç§€' : getCircuitStats().proofSize < 8192 ? 'è‰¯å¥½' : 'ä¸€èˆ¬'"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Code Structure -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ä»£ç ç»“æ„</h2>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-folder text-yellow-600 mr-2"></i>
                            æ ¸å¿ƒæ¨¡å—
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-file-code text-blue-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">lib.rs</div>
                                    <div class="text-sm text-gray-600">ä¸»è¦çš„ Marlin åè®®å®ç°</div>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-file-code text-purple-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">ahp/</div>
                                    <div class="text-sm text-gray-600">ä»£æ•°å…¨æ¯è¯æ˜æ¨¡å—</div>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-file-code text-green-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">data_structures.rs</div>
                                    <div class="text-sm text-gray-600">æ ¸å¿ƒæ•°æ®ç»“æ„å®šä¹‰</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">
                            <i class="fas fa-cogs text-cyan-600 mr-2"></i>
                            ä¾èµ–åº“
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-cube text-red-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">ark-poly-commit</div>
                                    <div class="text-sm text-gray-600">å¤šé¡¹å¼æ‰¿è¯ºæ–¹æ¡ˆ</div>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-cube text-orange-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">ark-relations</div>
                                    <div class="text-sm text-gray-600">R1CS çº¦æŸç³»ç»Ÿ</div>
                                </div>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-cube text-indigo-600 mr-3"></i>
                                <div>
                                    <div class="font-semibold">ark-ff</div>
                                    <div class="text-sm text-gray-600">æœ‰é™åŸŸè¿ç®—</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-4">åŸºäº Arkworks ç”Ÿæ€ç³»ç»Ÿæ„å»ºçš„ Marlin zkSNARK å®ç°</p>
            <div class="flex justify-center space-x-6">
                <a href="https://github.com/arkworks-rs/marlin" class="text-gray-400 hover:text-white">
                    <i class="fab fa-github text-xl"></i>
                </a>
                <a href="https://eprint.iacr.org/2019/1047" class="text-gray-400 hover:text-white">
                    <i class="fas fa-file-alt text-xl"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        function marlinDemo() {
            return {
                currentStep: 0,
                demoCompleted: false,
                // Initialize the real Marlin simulator
                simulator: new MarlinSimulator(),
                // Circuit Builder Properties
                selectedCircuit: 'multiplication',
                circuitParams: {
                    a: 3,
                    b: 5,
                    sideA: 3,
                    sideB: 4
                },
                customConstraints: 100,
                customVariables: 50,
                customCircuit: {
                    name: '',
                    variables: [],
                    constraints: []
                },
                isCircuitRunning: false,
                circuitResults: null,
                executionLogs: [],
                
                steps: [
                    {
                        title: "é€šç”¨è®¾ç½®é˜¶æ®µ",
                        description: "ç”Ÿæˆæ”¯æŒä»»æ„ç”µè·¯çš„é€šç”¨ç»“æ„åŒ–å‚è€ƒå­—ç¬¦ä¸² (Universal SRS)",
                        icon: "fas fa-cogs text-white",
                        color: "bg-blue-500",
                        input: `
                            <div class="font-mono text-xs">
                                <div>â€¢ num_constraints: çº¦æŸæ•°é‡</div>
                                <div>â€¢ num_variables: å˜é‡æ•°é‡</div>
                                <div>â€¢ num_non_zero: éé›¶å…ƒç´ æ•°é‡</div>
                                <div>â€¢ rng: éšæœºæ•°ç”Ÿæˆå™¨</div>
                            </div>
                        `,
                        output: `
                            <div class="font-mono text-xs">
                                <div>â€¢ UniversalSRS&lt;F, PC&gt;</div>
                                <div>â€¢ å¤šé¡¹å¼æ‰¿è¯ºæ–¹æ¡ˆå‚æ•°</div>
                                <div>â€¢ æ”¯æŒæœ€å¤§åº¦æ•°: max_degree</div>
                            </div>
                        `
                    },
                    {
                        title: "ç”µè·¯ç´¢å¼•é˜¶æ®µ",
                        description: "å°†çº¦æŸç³»ç»Ÿè½¬æ¢ä¸ºå¤šé¡¹å¼è¡¨ç¤ºï¼Œç”Ÿæˆç´¢å¼•å¯†é’¥å¯¹",
                        icon: "fas fa-database text-white",
                        color: "bg-purple-500",
                        input: `
                            <div class="font-mono text-xs">
                                <div>â€¢ UniversalSRS</div>
                                <div>â€¢ ConstraintSynthesizer</div>
                                <div>â€¢ R1CS çº¦æŸç³»ç»Ÿ</div>
                            </div>
                        `,
                        output: `
                            <div class="font-mono text-xs">
                                <div>â€¢ IndexProverKey</div>
                                <div>â€¢ IndexVerifierKey</div>
                                <div>â€¢ ç´¢å¼•å¤šé¡¹å¼æ‰¿è¯º</div>
                            </div>
                        `
                    },
                    {
                        title: "è¯æ˜ç”Ÿæˆé˜¶æ®µ",
                        description: "è¯æ˜è€…æ‰§è¡Œä¸‰è½® AHP åè®®ï¼Œç”Ÿæˆé›¶çŸ¥è¯†è¯æ˜",
                        icon: "fas fa-key text-white",
                        color: "bg-green-500",
                        input: `
                            <div class="font-mono text-xs">
                                <div>â€¢ IndexProverKey</div>
                                <div>â€¢ ç§æœ‰è§è¯ (witness)</div>
                                <div>â€¢ å…¬å¼€è¾“å…¥</div>
                                <div>â€¢ éšæœºæ€§</div>
                            </div>
                        `,
                        output: `
                            <div class="font-mono text-xs">
                                <div>â€¢ Proof&lt;F, PC&gt;</div>
                                <div>â€¢ å¤šé¡¹å¼æ‰¿è¯º</div>
                                <div>â€¢ æ±‚å€¼ç»“æœ</div>
                                <div>â€¢ PC è¯æ˜</div>
                            </div>
                        `
                    },
                    {
                        title: "è¯æ˜éªŒè¯é˜¶æ®µ",
                        description: "éªŒè¯è€…é«˜æ•ˆéªŒè¯è¯æ˜çš„æ­£ç¡®æ€§ï¼Œæ— éœ€é‡æ–°è®¡ç®—",
                        icon: "fas fa-check-circle text-white",
                        color: "bg-cyan-500",
                        input: `
                            <div class="font-mono text-xs">
                                <div>â€¢ IndexVerifierKey</div>
                                <div>â€¢ å…¬å¼€è¾“å…¥</div>
                                <div>â€¢ Proof</div>
                                <div>â€¢ éšæœºæ€§</div>
                            </div>
                        `,
                        output: `
                            <div class="font-mono text-xs">
                                <div>â€¢ bool: éªŒè¯ç»“æœ</div>
                                <div>â€¢ O(log n) éªŒè¯æ—¶é—´</div>
                                <div>â€¢ å®‰å…¨æ€§ä¿è¯</div>
                            </div>
                        `
                    }
                ],
                
                nextStep() {
                    if (this.currentStep < this.steps.length - 1) {
                        this.currentStep++;
                    } else {
                        this.demoCompleted = true;
                    }
                },
                
                previousStep() {
                    if (this.currentStep > 0) {
                        this.currentStep--;
                    }
                },

                // Circuit Builder Methods
                updateCircuitParams() {
                    // Reset parameters when circuit type changes
                    if (this.selectedCircuit === 'multiplication') {
                        this.circuitParams = { a: 3, b: 5 };
                    } else if (this.selectedCircuit === 'quadratic') {
                        this.circuitParams = { sideA: 3, sideB: 4 };
                    }
                },

                getCircuitStats() {
                    let constraints, variables, proofSize, verifyTime;
                    
                    switch (this.selectedCircuit) {
                        case 'multiplication':
                            constraints = 2;
                            variables = 4;
                            break;
                        case 'quadratic':
                            constraints = 4;
                            variables = 7;
                            break;
                        case 'hash':
                            constraints = 30000;
                            variables = 15000;
                            break;
                        case 'merkle':
                            constraints = 240000;
                            variables = 120000;
                            break;
                        case 'custom':
                            constraints = this.customCircuit.constraints.length || 1;
                            variables = this.customCircuit.variables.length || 1;
                            break;
                        default:
                            constraints = 100;
                            variables = 50;
                    }
                    
                    proofSize = Math.floor(1024 + Math.sqrt(constraints) * 32);
                    verifyTime = Math.floor(Math.log2(constraints) * 5 + 10);
                    
                    return {
                        constraints,
                        variables,
                        proofSize,
                        verifyTime
                    };
                },

                async runCircuitDemo() {
                    if (this.isCircuitRunning) return;
                    
                    this.isCircuitRunning = true;
                    this.circuitResults = null;
                    this.executionLogs = [];
                    
                    // Debug info
                    console.log('ğŸ” Debug: simulator object:', this.simulator);
                    console.log('ğŸ” Debug: selected circuit:', this.selectedCircuit);
                    console.log('ğŸ” Debug: circuit params:', this.circuitParams);
                    
                    try {
                        const stats = this.getCircuitStats();
                        
                        // Setup Phase
                        this.addLog('info', 'å¼€å§‹é€šç”¨è®¾ç½®é˜¶æ®µ...');
                        await this.delay(500);
                        
                        const setupTime = Math.floor(stats.constraints / 10 + Math.random() * 100);
                        this.addLog('success', `Universal SRS ç”Ÿæˆå®Œæˆ (${setupTime}ms)`);
                        
                        // Indexing Phase
                        this.addLog('info', 'å¼€å§‹ç”µè·¯ç´¢å¼•é˜¶æ®µ...');
                        await this.delay(800);
                        
                        const indexTime = Math.floor(stats.constraints / 5 + Math.random() * 200);
                        this.addLog('success', `ç”µè·¯ç´¢å¼•å®Œæˆ (${indexTime}ms)`);
                        
                        // Proving Phase
                        this.addLog('info', 'å¼€å§‹è¯æ˜ç”Ÿæˆé˜¶æ®µ...');
                        await this.delay(1200);
                        
                        const provingTime = Math.floor(stats.constraints / 2 + Math.random() * 500);
                        const proofSize = stats.proofSize;
                        this.addLog('success', `é›¶çŸ¥è¯†è¯æ˜ç”Ÿæˆå®Œæˆ (${provingTime}ms, ${proofSize} bytes)`);
                        
                        // Verification Phase
                        this.addLog('info', 'å¼€å§‹è¯æ˜éªŒè¯é˜¶æ®µ...');
                        await this.delay(300);
                        
                        // å‡†å¤‡éªŒè¯æ•°æ®
                        const circuitData = this.selectedCircuit === 'custom' ? this.customCircuit : null;
                        const witnessData = this.getWitnessForCircuit();
                        const publicData = this.getPublicInputForCircuit();
                        
                        // å®é™…è¿›è¡Œçº¦æŸéªŒè¯
                        const verificationResult = await this.simulator.simulateCircuitVerification(
                            witnessData, 
                            publicData, 
                            this.selectedCircuit,
                            circuitData
                        );
                        
                        const verifyTime = verificationResult.verificationTime;
                        
                        if (verificationResult.isValid) {
                            this.addLog('success', `è¯æ˜éªŒè¯æˆåŠŸ (${verifyTime}ms)`);
                        } else {
                            this.addLog('error', `è¯æ˜éªŒè¯å¤±è´¥: ${verificationResult.failureReason}`);
                        }
                        
                        // æ˜¾ç¤ºè¯¦ç»†çš„æ£€æŸ¥ç»“æœ
                        verificationResult.checksPerformed.forEach(check => {
                            if (check.includes('âŒ')) {
                                this.addLog('error', check);
                            } else if (check.includes('âœ…')) {
                                this.addLog('success', check);
                            } else {
                                this.addLog('info', check);
                            }
                        });
                        
                        // Set results
                        this.circuitResults = {
                            setup: {
                                status: 'âœ“ å®Œæˆ',
                                maxDegree: stats.constraints * 2,
                                time: setupTime
                            },
                            proving: {
                                status: 'âœ“ å®Œæˆ',
                                size: proofSize,
                                time: provingTime
                            },
                            verification: {
                                status: verificationResult.isValid ? 'âœ“ éªŒè¯é€šè¿‡' : 'âœ— éªŒè¯å¤±è´¥',
                                time: verifyTime,
                                isValid: verificationResult.isValid,
                                failureReason: verificationResult.failureReason
                            }
                        };
                        
                        if (verificationResult.isValid) {
                            this.addLog('success', 'ğŸ‰ ç”µè·¯æ¼”ç¤ºå®Œæˆï¼é›¶çŸ¥è¯†è¯æ˜æˆåŠŸéªŒè¯ã€‚');
                        } else {
                            this.addLog('error', 'âŒ ç”µè·¯æ¼”ç¤ºå¤±è´¥ï¼çº¦æŸéªŒè¯ä¸é€šè¿‡ã€‚');
                        }
                        
                    } catch (error) {
                        this.addLog('error', `æ¼”ç¤ºå‡ºé”™: ${error.message}`);
                    } finally {
                        this.isCircuitRunning = false;
                    }
                },

                addLog(type, message) {
                    const timestamp = new Date().toLocaleTimeString();
                    this.executionLogs.push({
                        id: Date.now() + Math.random(),
                        type,
                        message,
                        timestamp
                    });
                    
                    // Auto scroll to bottom
                    this.$nextTick(() => {
                        const logContainer = document.querySelector('.bg-gray-900');
                        if (logContainer) {
                            logContainer.scrollTop = logContainer.scrollHeight;
                        }
                    });
                },

                getLogColor(type) {
                    switch (type) {
                        case 'success':
                            return 'text-green-400';
                        case 'error':
                            return 'text-red-400';
                        case 'warning':
                            return 'text-yellow-400';
                        case 'info':
                        default:
                            return 'text-cyan-400';
                    }
                },

                delay(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms));
                },

                // Custom Circuit Builder Methods
                addVariable() {
                    this.customCircuit.variables.push({
                        type: 'private',
                        name: `x${this.customCircuit.variables.length + 1}`,
                        description: ''
                    });
                },

                removeVariable(index) {
                    this.customCircuit.variables.splice(index, 1);
                },

                addConstraint() {
                    this.customCircuit.constraints.push({
                        left: '',
                        right: '',
                        output: ''
                    });
                },

                removeConstraint(index) {
                    this.customCircuit.constraints.splice(index, 1);
                },

                loadTemplate(templateType) {
                    switch (templateType) {
                        case 'polynomial':
                            this.customCircuit = {
                                name: 'å¤šé¡¹å¼éªŒè¯ç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'x', description: 'å¤šé¡¹å¼è¾“å…¥' },
                                    { type: 'private', name: 'x_squared', description: 'xçš„å¹³æ–¹' },
                                    { type: 'private', name: 'x_cubed', description: 'xçš„ç«‹æ–¹' },
                                    { type: 'public', name: 'result', description: 'å¤šé¡¹å¼ç»“æœ' }
                                ],
                                constraints: [
                                    { left: 'x', right: 'x', output: 'x_squared' },
                                    { left: 'x_squared', right: 'x', output: 'x_cubed' },
                                    { left: '2*x_cubed + 3*x_squared + x', right: '1', output: 'result' }
                                ]
                            };
                            break;
                        case 'comparison':
                            this.customCircuit = {
                                name: 'æ•°å€¼æ¯”è¾ƒç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'a', description: 'ç§å¯†æ•°å€¼A' },
                                    { type: 'private', name: 'b', description: 'ç§å¯†æ•°å€¼B' },
                                    { type: 'private', name: 'diff', description: 'å·®å€¼' },
                                    { type: 'public', name: 'is_greater', description: 'Aæ˜¯å¦å¤§äºB' }
                                ],
                                constraints: [
                                    { left: 'a', right: '1', output: 'a' },
                                    { left: 'b', right: '1', output: 'b' },
                                    { left: 'a - b', right: '1', output: 'diff' },
                                    { left: 'diff * inv_diff', right: '1', output: 'is_greater' }
                                ]
                            };
                            break;
                        case 'range':
                            this.customCircuit = {
                                name: 'èŒƒå›´è¯æ˜ç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'value', description: 'è¢«è¯æ˜çš„å€¼' },
                                    { type: 'private', name: 'r1', description: 'èŒƒå›´æ£€æŸ¥å˜é‡1' },
                                    { type: 'private', name: 'r2', description: 'èŒƒå›´æ£€æŸ¥å˜é‡2' },
                                    { type: 'public', name: 'min_val', description: 'æœ€å°å€¼' },
                                    { type: 'public', name: 'max_val', description: 'æœ€å¤§å€¼' }
                                ],
                                constraints: [
                                    { left: 'value - min_val', right: '1', output: 'r1' },
                                    { left: 'max_val - value', right: '1', output: 'r2' },
                                    { left: 'r1', right: 'r1_inv', output: '1' },
                                    { left: 'r2', right: 'r2_inv', output: '1' }
                                ]
                            };
                            break;
                        case 'sudoku':
                            this.customCircuit = {
                                name: 'æ•°ç‹¬éªŒè¯ç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'grid[0..80]', description: '9x9æ•°ç‹¬ç½‘æ ¼' },
                                    { type: 'public', name: 'known_cells', description: 'å·²çŸ¥æ ¼å­çš„å€¼' },
                                    { type: 'private', name: 'row_sums[0..8]', description: 'è¡Œå’ŒéªŒè¯' },
                                    { type: 'private', name: 'col_sums[0..8]', description: 'åˆ—å’ŒéªŒè¯' },
                                    { type: 'private', name: 'box_sums[0..8]', description: 'å®«å’ŒéªŒè¯' }
                                ],
                                constraints: [
                                    { left: 'grid[i]', right: 'grid[i] - 1', output: 'range_check_1[i]' },
                                    { left: 'grid[i] - 9', right: '1', output: 'range_check_2[i]' },
                                    { left: 'row_sum[i]', right: '1', output: '45' },
                                    { left: 'col_sum[i]', right: '1', output: '45' },
                                    { left: 'box_sum[i]', right: '1', output: '45' }
                                ]
                            };
                            break;
                        case 'error_contradiction':
                            this.customCircuit = {
                                name: 'çŸ›ç›¾çº¦æŸæµ‹è¯•ç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'x', description: 'ä»»æ„ç§å¯†å€¼' },
                                    { type: 'public', name: 'result', description: 'é¢„æœŸç»“æœ' }
                                ],
                                constraints: [
                                    { left: '1', right: '1', output: '0' },  // æ˜æ˜¾é”™è¯¯ï¼š1 Ã— 1 â‰  0
                                    { left: 'x', right: '1', output: 'x' }   // è¿™ä¸ªæ˜¯æ­£ç¡®çš„
                                ]
                            };
                            break;
                        case 'error_zero_mult':
                            this.customCircuit = {
                                name: 'é›¶ä¹˜æ³•é”™è¯¯æµ‹è¯•ç”µè·¯',
                                variables: [
                                    { type: 'private', name: 'x', description: 'ä»»æ„ç§å¯†å€¼' },
                                    { type: 'public', name: 'result', description: 'é”™è¯¯çš„ç»“æœ' }
                                ],
                                constraints: [
                                    { left: '0', right: 'x', output: '5' },  // é”™è¯¯ï¼š0 Ã— x â‰  5
                                    { left: 'x', right: '0', output: '3' }   // é”™è¯¯ï¼šx Ã— 0 â‰  3
                                ]
                            };
                            break;
                    }
                },

                getCustomCircuitDescription() {
                    if (!this.customCircuit.name) return "æœªå®šä¹‰çš„è‡ªå®šä¹‰ç”µè·¯";
                    
                    const publicVars = this.customCircuit.variables.filter(v => v.type === 'public').length;
                    const privateVars = this.customCircuit.variables.filter(v => v.type === 'private').length;
                    const constraints = this.customCircuit.constraints.length;
                    
                    return `${this.customCircuit.name} (${constraints}ä¸ªçº¦æŸ, ${publicVars}ä¸ªå…¬å¼€å˜é‡, ${privateVars}ä¸ªç§å¯†å˜é‡)`;
                },

                // è·å–å½“å‰ç”µè·¯çš„è§è¯æ•°æ®
                getWitnessForCircuit() {
                    switch (this.selectedCircuit) {
                        case 'multiplication':
                            return { a: this.circuitParams.a, b: this.circuitParams.b };
                        case 'quadratic':
                            return { sideA: this.circuitParams.sideA, sideB: this.circuitParams.sideB };
                        case 'hash':
                            return { preimage: 'demo_preimage' };
                        case 'merkle':
                            return { leaf: 'demo_leaf', path: ['demo_path'] };
                        case 'custom':
                            // ä¸ºè‡ªå®šä¹‰ç”µè·¯ç”Ÿæˆç¤ºä¾‹è§è¯æ•°æ®
                            const witness = {};
                            this.customCircuit.variables.forEach(variable => {
                                if (variable.type === 'private') {
                                    witness[variable.name] = Math.floor(Math.random() * 10) + 1;
                                }
                            });
                            return witness;
                        default:
                            return {};
                    }
                },

                // è·å–å½“å‰ç”µè·¯çš„å…¬å¼€è¾“å…¥
                getPublicInputForCircuit() {
                    switch (this.selectedCircuit) {
                        case 'multiplication':
                            return { c: this.circuitParams.a * this.circuitParams.b };
                        case 'quadratic':
                            const c = Math.sqrt(this.circuitParams.sideA ** 2 + this.circuitParams.sideB ** 2);
                            return { c: c };
                        case 'hash':
                            return { hash: 'demo_hash_output' };
                        case 'merkle':
                            return { root: 'demo_merkle_root' };
                        case 'custom':
                            // ä¸ºè‡ªå®šä¹‰ç”µè·¯ç”Ÿæˆç¤ºä¾‹å…¬å¼€è¾“å…¥
                            const publicInput = {};
                            this.customCircuit.variables.forEach(variable => {
                                if (variable.type === 'public') {
                                    publicInput[variable.name] = Math.floor(Math.random() * 10) + 1;
                                }
                            });
                            return publicInput;
                        default:
                            return {};
                    }
                }
            }
        }
    </script>
</body>
</html>